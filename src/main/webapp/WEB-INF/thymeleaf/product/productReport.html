<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <meta charset="utf-8" />
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" 
          th:href="@{/webjars/bootstrap/3.2.0/css/bootstrap.min.css}"  rel="stylesheet"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"
            th:src="@{/webjars/jquery/2.1.4/jquery.js}"></script>
</head>

<body>

<script type="text/javascript">

$(document).ready(function(){
   $("ul.pagination a").click(function(e) {
        e.preventDefault();
        $("#page").val($(this).attr("id"));
        $("form").submit();
    }); 
});
</script>

    <div class="container">
        <br/>
        <form action="#" th:action="@{/products/report}" th:object="${productReportFilter}" class="form-horizontal" method="post">
                <div class="form-group" th:classappend="${#fields.hasErrors('name')} ? 'has-error'">
                    <label class="control-label col-md-2">name: </label>
                    <div class="col-md-10">
                       <input type="text" th:field="*{name}" class="form-control"/>
                       <span class="help-inline" th:errors="*{name}">[error]</span>
                     </div>
                </div>
                <div class="form-group" th:classappend="${#fields.hasErrors('price')} ? 'has-error'">
                    <label class="control-label col-md-2">price: </label>
                    <div class="col-md-10">
                        <input type="text" th:field="*{price}" class="form-control"/>
                        <span class="help-inline" th:errors="*{price}">[error]</span>
                    </div>
                </div>
                <div class="form-group" th:classappend="${#fields.hasErrors('fromDate')} ? 'has-error'">
                    <label class="control-label col-md-2">From Date: </label>
                    <div class="col-md-10">
                        <input type="text" th:field="*{fromDate}" class="form-control" th:errorclass="fieldError"/>
                        <span class="help-inline" th:errors="*{fromDate}">[error]</span>
                    </div>
                </div>
                <div class="form-group" th:classappend="${#fields.hasErrors('toDate')} ? 'has-error'">
                    <label class="control-label col-md-2">To Date: </label>
                    <div class="col-md-10">
                        <input type="text" th:field="*{toDate}" class="form-control" th:errorclass="fieldError"/>
                        <span class="help-inline" th:errors="*{toDate}">[error]</span>
                    </div>
                </div>
               <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <input  type="submit" value="report" class="btn btn-primary" />
                    </div>
                </div>
                <input type="hidden" name="page" id="page" value="1" />
                <input type="hidden" name="pageSize" id="pageSize" value="10" />
        </form>
        <table class="table table-bordered table-striped">
            <tr>
                <th>name</th>
                <th>price</th>
                <th>DateTime</th>
            </tr>
            <tr th:each="product : ${products}">
                <td th:text="${product.name}">name</td>
                <td th:text="${product.price}">125.58</td>
                <td th:text="${{product.dateTime}}">2015/08/30 12:00:00</td>
            </tr>
        </table>
        <ul class="pagination pagination-lg" th:with="page1=${(((page-1)/3)*3)+1},page2=${(((page-1)/3)*3)+2},page3=${(((page-1)/3)*3)+3}">
          <li th:unless="${page == 1}">
            <a th:id="1" href="#">&#060;&#060;</a>
          </li>
          <li th:unless="${page le 1}">
            <a th:id="${page-1}" href="#">&#060;</a>
          </li>
          <li th:unless="${((page1-1)*pageSize) ge count}" th:classappend="(${page} == ${page1})? 'active'">
            <a th:id="${page1}" href="#" th:text="${page1}">1</a>
          </li>
          <li th:unless="${((page2-1)*pageSize) ge count}" th:classappend="(${page} == ${page2})? 'active'">
            <a th:id="${page2}"  href="#" th:text="${page2}">2</a>
          </li>
          <li th:unless="${((page3-1)*pageSize) ge count}" th:classappend="(${page} == ${page3})? 'active'">
            <a th:id="${page3}" href="#" th:text="${page3}">3</a>
          </li>
          <li th:unless="${page ge ((count/pageSize)+1)}">
            <a th:id="${page+1}" href="#">&#062;</a>
          </li>
          <li th:unless="${page == ((count/pageSize)+1)}">
            <a th:id="${(count/pageSize)+1}" href="#">&#062;&#062;</a>
          </li>
        </ul>
    </div>
</body>

</html>
